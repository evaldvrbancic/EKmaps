<template>
  <div id="app">

    <!-- Left panel with cover effect-->
    <div class="panel panel-left panel-cover theme-light panel-init">
      <div class="view">
        <div class="page">
          <div class="navbar">
            <div class="navbar-bg"></div>
            <div class="navbar-inner">
              <div class="title">Menu</div>
            </div>
          </div>
          <div class="page-content">
            <div class="list align-self-flex-end no-hairlines">
              <ul>
                <li>
                  <div class="block segmented login-button-color">
                    <a href="/settings/" class="button button-raised button-fill panel-close">Settings</a>
                  </div>
                </li>
                <li>
                  <div class="block segmented login-button-color">
                    <a href="/about/" class="button button-raised button-fill panel-close">Information</a>
                  </div>
                </li>
                <li style="margin-top: 70vh;">
                  <div class="block segmented login-button-color">
                    <a href="#" class="button button-raised button-fill login-screen-open panel-close"
                      data-login-screen="#my-login-screen">Log out</a>
                  </div>
                </li>
              </ul>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Right panel with reveal effect-->
    <div class="panel panel-right panel-reveal theme-light">
      <div class="view">
        <div class="page">
          <div class="navbar">
            <div class="navbar-bg"></div>
            <div class="navbar-inner">
              <div class="title">Chat rooms</div>
            </div>
          </div>
          <div class="page-content">
            <div class="list media-list inset">
              <ul>
                <li style="border: solid 1px lightgray;border-radius: 10px;">
                  <a href="/chatroom/" class="item-link item-content panel-close">
                    <div class="item-media"><img src="https://i.imgur.com/jkYkW4Z.png" width="44" /></div>
                    <div class="item-inner">
                      <div class="item-title-row">
                        <div class="item-title">Miha</div>
                        <div class="item-after">18:24</div>
                      </div>
                      <div class="item-subtitle">Super</div>
                    </div>
                  </a>
                </li>
                <li style="border: solid 1px lightgray;border-radius: 10px; margin-top:5px;">
                  <a href="/chatroom/" class="item-link item-content panel-close">
                    <div class="item-media"><img src="https://i.imgur.com/jkYkW4Z.png" width="44" /></div>
                    <div class="item-inner">
                      <div class="item-title-row">
                        <div class="item-title">Jan</div>
                        <div class="item-after">12:54</div>
                      </div>
                      <div class="item-subtitle">to je precej dolgo sporocilo</div>
                    </div>
                  </a>
                </li>
                <li style="border: solid 1px lightgray;border-radius: 10px; margin-top:5px;">
                  <a href="/chatroom/" class="item-link item-content panel-close">
                    <div class="item-media"><img src="https://i.imgur.com/jkYkW4Z.png" width="44" /></div>
                    <div class="item-inner">
                      <div class="item-title-row">
                        <div class="item-title">Nika</div>
                        <div class="item-after">9:08</div>
                      </div>
                      <div class="item-subtitle">zdravo</div>
                    </div>
                  </a>
                </li>
              </ul>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Your main view, should have "view-main" class -->
    <div class="view view-main view-init safe-areas" data-url="/"></div>


    <!-- Popup -->
    <div class="popup" id="my-popup">
      <div class="view">
        <div class="page">
          <div class="navbar">
            <div class="navbar-bg"></div>
            <div class="navbar-inner">
              <div class="title">Popup</div>
              <div class="right">
                <a href="#" class="link popup-close">Close</a>
              </div>
            </div>
          </div>
          <div class="page-content">
            <div class="block">
              <p>Popup content goes here.</p>

            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Login Screen -->
    <div class="login-screen modal-in" id="my-login-screen">
      <div class="view">
        <div class="page login-register-border" style="border-style: solid;border-color: lightgrey;border-width: 2px;">
          <div class="login-title login-title-color">EK maps</div>
          <div class="page-content login-screen-content">
            <div class="login-screen-title login-title-color">Login</div>
            <div class="list">
              <ul>
                <li class="item-content item-input item-input-outline item-input-with-info">
                  <div class="item-inner">
                    <div class="item-title item-floating-label">Username</div>
                    <div class="item-input-wrap">
                      <input type="text" name="username" placeholder="Your username" value="${username}"
                        @input="${updateUsername}" required validate />
                      <span class="input-clear-button"></span>
                      <div class="item-input-info">Username is required</div>
                    </div>
                  </div>
                </li>
                <li class="item-content item-input item-input-outline item-input-with-info">
                  <div class="item-inner">
                    <div class="item-title item-floating-label">Password</div>
                    <div class="item-input-wrap">
                      <input type="password" name="password" placeholder="Your password" value="${password}"
                        @input="${updatePassword}" required validate />
                      <span class="input-clear-button"></span>
                      <div class="item-input-info">Password is required</div>
                    </div>
                  </div>
                </li>
                <li>
                  <label class="item-checkbox item-content">
                    <input type="checkbox" name="demo-checkbox" value="rememberMe" />
                    <i class="icon icon-checkbox"></i>
                    <div class="item-inner">
                      <div class="item-title">Remember me</div>
                    </div>
                  </label>
                </li>
              </ul>
            </div>
            <div class="list">
              <ul>
                <li>
                  <div class="block segmented login-button-color">
                    <a href="#" class="item-link button button-preloader button-fill" @click="${closeThis}">Sign
                      In</a>
                  </div>
                </li>
              </ul>
              <div class="block-footer">Don't have an account?<br />
                <a href="/register/" @click="${closeThis}">Register </a> one here!
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

  </div>
</template>
<script>
  export default (props, { $f7, $update }) => {
    // Login screen demo data
    let username = '';
    let password = '';

    const updateUsername = (e) => {
      username = e.target.value;
      $update();
    }
    const updatePassword = (e) => {
      password = e.target.value;
      $update();
    }
    const alertLoginData = () => {
      $f7.request.get('https://reqbin.com/echo/get/json')
        .then(function (res) {
          console.log(res);
        })
        .catch(function (err) {
          console.log(err.xhr)
          console.log(err.status)
          console.log(err.message)
        })
    }
    const closeThis = () => {
      $f7.loginScreen.close();
    }
    return $render;
  }

</script>